jQuery(document).ready(function($)
{
    // switcher button logic
    $('.wpasl-switcher-btn').click(function()
    {
        // init and get data vars
        var _field = $(this).data("field");
        var _value = $(this).data("val");
        var _name  = $(this).data("name");
        var _show  = $(this).data("show");
        var _hide  = $(this).data("hide");

        // reflect button
        $('.'+_name).removeClass('wpasl-switcher-active');
        $(this).addClass('wpasl-switcher-active');

        // alter and set button value to field
        $('#'+_field).val(_value);

        // do reflect view as per button
        $(_show).show();
        $(_hide).hide();

    });

    // tab nav logic
    $('.wpasl-tab-nav').click(function()
    {
        // init and get data vars
        var _id = $(this).data("id");

        // store this tab as active tab
        $('input[name="active_tab"]').val(_id);

        // inactive current tab
        $('.wpasl-active-section').removeClass('wpasl-active-section').addClass("wpasl-hidden");

        // active this tab
        $('div[data-id="'+_id+'"]').removeClass('wpasl-hidden').addClass("wpasl-active-section");

        // remove prev active tab
        $('.wpasl-tab-nav').removeClass('wpasl-active-nav');

        // mark this as active
        $(this).addClass('wpasl-active-nav');
    });

    $('#cb-select-all-wpasl-1, #cb-select-all-wpasl-2').change(function()
    {
        $('input[name="bulkCheck[]"]').prop("checked", $(this).prop("checked"));
        bulkIdsToJsonField();

    });

    $('input[name="bulkCheck[]"]').on('change',function(){
        bulkIdsToJsonField();
    });

    function bulkIdsToJsonField()
    {
        var ids = {};
        var ind = 0;
        $('input[name="bulkCheck[]"]:checked').each(function()
        {
            ids[ind]        = {};
            ids[ind]["id"]  = $(this).val();
            ids[ind]["ip"]  = $('input[name="bulkIp-'+$(this).val()+'"]').val();
            ids[ind]["url"] = $('input[name="bulkUrl-'+$(this).val()+'"]').val();
            ind++;
        });
        $('input[name="ids"]').val(btoa(JSON.stringify(ids)));
    }

    $('.wpasl-login-switch.wpasl-switcher-active').trigger("click");
    $('.wpasl-adminlogging-switch.wpasl-switcher-active').trigger("click");
    $('.wpasl-frontlogging-switch.wpasl-switcher-active').trigger("click");
    $('.wpasl-alert-switch.wpasl-switcher-active').trigger("click");

    var selected_tab = $('input[name="active_tab"]').val();
    if(selected_tab!="")
    {
        $('li.wpasl-tab-nav[data-id="'+selected_tab+'"]').trigger("click");
    }

    $('#popup_this').bPopup();
});